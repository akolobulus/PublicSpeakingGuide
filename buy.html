<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Now - Simplest Guide to Public Speaking</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2 class="logo-text">Favourebidakoru.org</h2>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="about-book.html" class="nav-link">About Book</a>
                <a href="about-author.html" class="nav-link">About Author</a>
                <a href="read-online.html" class="nav-link">Read Online</a>
                <a href="buy.html" class="nav-link active">Buy Now</a>
                <a href="testimonials.html" class="nav-link">Testimonials</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </div>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Buy the Book</h1>
            <p>Get your copy of the Simplest Guide to Public Speaking</p>
        </div>
    </section>

    <!-- Purchase Options -->
    <section class="purchase-options">
        <div class="container">
            <div class="purchase-content">
                <div class="book-showcase">
                    <img src="https://via.placeholder.com/400x600/D7263D/FFFFFF?text=SIMPLEST+GUIDE+TO+PUBLIC+SPEAKING" alt="Book Cover" class="book-cover-purchase">
                    <div class="book-highlights">
                        <h3>What You Get:</h3>
                        <ul class="highlights-list">
                            <li><i class="fas fa-check"></i> 250 pages of expert guidance</li>
                            <li><i class="fas fa-check"></i> 12 comprehensive chapters</li>
                            <li><i class="fas fa-check"></i> Practical exercises and examples</li>
                            <li><i class="fas fa-check"></i> Bonus worksheets and templates</li>
                            <li><i class="fas fa-check"></i> Lifetime access to digital version</li>
                            <li><i class="fas fa-check"></i> Money-back guarantee</li>
                        </ul>
                    </div>
                </div>

                <div class="purchase-details">
                    <h2>Simplest Guide to Public Speaking</h2>
                    <p class="book-author">by Favour Ebi Dakoru</p>

                    <div class="pricing-section">
                        <div class="price-card featured">
                            <div class="price-header">
                                <h3>Digital Edition</h3>
                                <p class="price-description">PDF + EPUB formats</p>
                            </div>
                            <div class="price-amount">
                                <span class="currency">₦</span>
                                <span class="amount">5,000</span>
                            </div>
                            <div class="price-features">
                                <ul>
                                    <li><i class="fas fa-check"></i> Instant download</li>
                                    <li><i class="fas fa-check"></i> PDF and EPUB formats</li>
                                    <li><i class="fas fa-check"></i> Read on any device</li>
                                    <li><i class="fas fa-check"></i> Bonus worksheets</li>
                                    <li><i class="fas fa-check"></i> Lifetime access</li>
                                </ul>
                            </div>
                            <button class="btn btn-primary purchase-btn" onclick="initiateFlutterwavePayment('digital')">
                                <i class="fas fa-shopping-cart"></i> Buy Digital Edition
                            </button>
                        </div>

                        <div class="price-card">
                            <div class="price-header">
                                <h3>Print Edition</h3>
                                <p class="price-description">Physical book + Digital copy</p>
                            </div>
                            <div class="price-amount">
                                <span class="currency">₦</span>
                                <span class="amount">8,000</span>
                            </div>
                            <div class="price-features">
                                <ul>
                                    <li><i class="fas fa-check"></i> Physical paperback</li>
                                    <li><i class="fas fa-check"></i> Free digital copy</li>
                                    <li><i class="fas fa-check"></i> Nationwide delivery</li>
                                    <li><i class="fas fa-check"></i> Bonus materials</li>
                                    <li><i class="fas fa-check"></i> Author's signature</li>
                                </ul>
                            </div>
                            <button class="btn btn-secondary purchase-btn" onclick="initiateFlutterwavePayment('print')">
                                <i class="fas fa-book"></i> Buy Print Edition
                            </button>
                        </div>
                    </div>

                    <div class="purchase-info">
                        <div class="info-item">
                            <i class="fas fa-shield-alt"></i>
                            <div>
                                <h4>Secure Payment</h4>
                                <p>Your payment is processed securely through Flutterwave</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-download"></i>
                            <div>
                                <h4>Instant Access</h4>
                                <p>Download your digital copy immediately after purchase</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-undo"></i>
                            <div>
                                <h4>Money-back Guarantee</h4>
                                <p>30-day money-back guarantee if you're not satisfied</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Preview -->
    <section class="testimonials-preview">
        <div class="container">
            <h2 class="section-title">What Readers Are Saying</h2>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"This book completely transformed my approach to public speaking. The techniques are simple yet incredibly effective."</p>
                    <div class="testimonial-author">
                        <strong>Sarah Johnson</strong>
                        <span>Marketing Manager</span>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"As someone who was terrified of speaking in public, this book gave me the confidence I needed. Highly recommended!"</p>
                    <div class="testimonial-author">
                        <strong>Michael Chen</strong>
                        <span>Software Engineer</span>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"The practical exercises and real-world examples make this book invaluable for anyone looking to improve their speaking skills."</p>
                    <div class="testimonial-author">
                        <strong>Dr. Emily Rodriguez</strong>
                        <span>University Professor</span>
                    </div>
                </div>
            </div>
            <div class="testimonials-link">
                <a href="testimonials.html" class="btn btn-outline">Read More Testimonials</a>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h3>What formats are available?</h3>
                    <p>The digital edition comes in both PDF and EPUB formats, compatible with all devices and e-readers.</p>
                </div>
                <div class="faq-item">
                    <h3>How do I access my digital copy?</h3>
                    <p>After successful payment, you'll receive an email with download links within 5 minutes.</p>
                </div>
                <div class="faq-item">
                    <h3>Is there a money-back guarantee?</h3>
                    <p>Yes, we offer a 30-day money-back guarantee if you're not completely satisfied with your purchase.</p>
                </div>
                <div class="faq-item">
                    <h3>How long does print delivery take?</h3>
                    <p>Print editions are delivered within 5-7 business days within Nigeria, and 10-14 days internationally.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Simplest Guide to Public Speaking</h3>
                    <p>Transform your communication skills with proven techniques and expert guidance.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="about-book.html">About Book</a></li>
                        <li><a href="about-author.html">About Author</a></li>
                        <li><a href="testimonials.html">Testimonials</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Favour Ebi Dakoru. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Customer Info Modal -->
    <div id="customerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Purchase Information</h2>
                <span class="close" onclick="closeCustomerModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <p>Please provide your information to complete the purchase:</p>
                    
                    <div class="form-group">
                        <label for="customerName">Full Name *</label>
                        <input type="text" id="customerName" name="customerName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customerEmail">Email Address *</label>
                        <input type="email" id="customerEmail" name="customerEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customerPhone">Phone Number *</label>
                        <input type="tel" id="customerPhone" name="customerPhone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customerCountry">Country *</label>
                        <select id="customerCountry" name="customerCountry" required>
                            <option value="">Select Country</option>
                            <option value="NG">Nigeria</option>
                            <option value="GH">Ghana</option>
                            <option value="KE">Kenya</option>
                            <option value="ZA">South Africa</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="purchase-summary" id="purchaseSummary">
                        <!-- Purchase details will be populated here -->
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-credit-card"></i> Proceed to Payment
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <!-- Flutterwave Integration -->
    <script src="https://checkout.flutterwave.com/v3.js"></script>
    <script>
        // Global variables for payment
        let selectedEdition = '';
        let customerData = {};
        
        // Initialize customer modal functionality
        function initiateFlutterwavePayment(edition) {
            selectedEdition = edition;
            
            // Show customer info modal first
            openCustomerModal(edition);
        }
        
        // Open customer info modal
        function openCustomerModal(edition) {
            const modal = document.getElementById('customerModal');
            const summary = document.getElementById('purchaseSummary');
            
            // Populate purchase summary
            let price, title, description;
            if (edition === 'digital') {
                price = '₦5,000';
                title = 'Digital Edition';
                description = 'PDF + EPUB formats with bonus materials';
            } else {
                price = '₦8,000';
                title = 'Print Edition';
                description = 'Physical book + Digital copy with author\'s signature';
            }
            
            summary.innerHTML = `
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                    <h4>Purchase Summary</h4>
                    <div style="display: flex; justify-content: space-between; margin: 0.5rem 0;">
                        <span>Simplest Guide to Public Speaking - ${title}</span>
                        <strong>${price}</strong>
                    </div>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 1rem;">${description}</p>
                </div>
            `;
            
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        // Close customer modal
        function closeCustomerModal() {
            const modal = document.getElementById('customerModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Reset form
            document.getElementById('customerForm').reset();
        }
        
        // Handle customer form submission
        document.addEventListener('DOMContentLoaded', function() {
            const customerForm = document.getElementById('customerForm');
            if (customerForm) {
                customerForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Collect customer data
                    customerData = {
                        name: document.getElementById('customerName').value,
                        email: document.getElementById('customerEmail').value,
                        phone: document.getElementById('customerPhone').value,
                        country: document.getElementById('customerCountry').value
                    };
                    
                    // Close customer modal
                    closeCustomerModal();
                    
                    // Process payment
                    processFlutterwavePayment();
                });
            }
        });
        
        // Process Flutterwave payment with customer data
        function processFlutterwavePayment() {
            // Payment configuration
            let paymentConfig;
            
            if (selectedEdition === 'digital') {
                paymentConfig = {
                    public_key: "FLWPUBK_TEST-68f8b6b6c0ada267982888334ff3725d-X",
                    tx_ref: "digital_book_" + Date.now(),
                    amount: 5000,
                    currency: "NGN",
                    payment_options: "card,mobilemoney,ussd,banktransfer,qr,mpesa,ghana_mobile_money,rwanda_mobile_money,zambia_mobile_money,uganda_mobile_money",
                    customer: {
                        email: customerData.email,
                        phone_number: customerData.phone,
                        name: customerData.name,
                    },
                    customizations: {
                        title: "Simplest Guide to Public Speaking - Digital Edition",
                        description: "Digital copy (PDF + EPUB) with bonus materials",
                        logo: "https://via.placeholder.com/150x50/FFB400/001F54?text=LOGO",
                    },
                    meta: {
                        customer_name: customerData.name,
                        customer_country: customerData.country,
                        book_edition: "digital"
                    }
                };
            } else if (selectedEdition === 'print') {
                paymentConfig = {
                    public_key: "FLWPUBK_TEST-68f8b6b6c0ada267982888334ff3725d-X",
                    tx_ref: "print_book_" + Date.now(),
                    amount: 8000,
                    currency: "NGN",
                    payment_options: "card,mobilemoney,ussd,banktransfer,qr,mpesa,ghana_mobile_money,rwanda_mobile_money,zambia_mobile_money,uganda_mobile_money",
                    customer: {
                        email: customerData.email,
                        phone_number: customerData.phone,
                        name: customerData.name,
                    },
                    customizations: {
                        title: "Simplest Guide to Public Speaking - Print Edition",
                        description: "Physical book + Digital copy with author's signature",
                        logo: "https://via.placeholder.com/150x50/FFB400/001F54?text=LOGO",
                    },
                    meta: {
                        customer_name: customerData.name,
                        customer_country: customerData.country,
                        book_edition: "print"
                    }
                };
            }
            
            // Add callback functions
            paymentConfig.callback = function (data) {
                console.log("Payment successful:", data);
                
                // Show success message
                if (window.showNotification) {
                    window.showNotification('Payment successful! You will receive your book shortly.', 'success');
                } else {
                    alert('Payment successful! You will receive your book shortly.');
                }
                
                // Store purchase info for confirmation
                localStorage.setItem('lastPurchase', JSON.stringify({
                    ...customerData,
                    edition: selectedEdition,
                    transactionRef: data.tx_ref,
                    amount: data.amount,
                    timestamp: new Date().toISOString()
                }));
                
                // In a real implementation, you would:
                // 1. Verify the payment on your server using the transaction reference
                // 2. Send the digital book to the customer's email
                // 3. Update your database with the purchase record
                // 4. Send confirmation email with download links
                // 5. For print books, initiate shipping process
                
                // Redirect to a thank you page
                setTimeout(() => {
                    window.location.href = 'index.html?payment=success&tx_ref=' + data.tx_ref;
                }, 2000);
            };
            
            paymentConfig.onclose = function() {
                console.log("Payment cancelled by user");
                
                if (window.showNotification) {
                    window.showNotification('Payment cancelled. You can try again anytime.', 'error');
                }
            };
            
            // Launch Flutterwave payment modal
            FlutterwaveCheckout(paymentConfig);
        }
        
        // Handle successful payment redirect
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('payment') === 'success') {
                // Show success message on page load
                setTimeout(() => {
                    if (window.showNotification) {
                        window.showNotification('Welcome back! Your payment was processed successfully.', 'success');
                    }
                    
                    // Show purchase confirmation if available
                    const lastPurchase = localStorage.getItem('lastPurchase');
                    if (lastPurchase) {
                        const purchase = JSON.parse(lastPurchase);
                        console.log('Purchase details:', purchase);
                        // Here you could show a download modal or confirmation details
                    }
                }, 1000);
            }
        });
        
        // Close modal when clicking outside
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('customerModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeCustomerModal();
                    }
                });
            }
            
            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.style.display === 'block') {
                    closeCustomerModal();
                }
            });
        });
    </script>
</body>
</html>
